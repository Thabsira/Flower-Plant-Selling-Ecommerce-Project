<%- include("../../views/partials/user/header") %>

<!-- Add some CSS styling to fix overlapping and general layout -->
<style>
    body {
        margin-top: 100px; /* Ensure content doesn't overlap with the header */
       /* margin-bottom: 50px; /* Ensure content doesn't overlap with the footer */
    }

    

    .card-header {
        background-color: #8dd23d; /* Primary color for header */
        color: white;
    }

    .btn-primary, .btn-warning, .btn-danger {
        margin-right: 5px;
    }

    /* Ensure the footer stays at the bottom of the page */
   /* footer {
        position: fixed;
        bottom: 0;
        width: 100%;
        z-index: 1000;
    }*/
</style>

<body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">User Profile</h1>
        
        <!-- Basic User Details -->
        <div class="card mb-4">
            <div class="card-header">Profile Details</div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Name:</strong> <%= user.name %></p>
                        <p><strong>Email:</strong> <%= user.email %></p>
                        <p><strong>Phone:</strong> <%= user.phone || 'Not Provided' %></p>
                    </div>
                    <div class="col-md-6">
                       <!---- <p><strong>Wallet Balance:</strong> $<%= user.wallet %></p>
                        <p><strong>Referral Code:</strong> <%= user.referalCode || 'N/A' %></p>

                    
                        <p><strong>Account Status:</strong> <%= user.isBlocked ? 'Blocked' : 'Active' %></p>--->
                        <a href="/wallet" class="btn btn-primary">Go to Wallet</a>
                       <!---- <a href="#" class="btn btn-primary">Referral</a>--->
                       <a href="/orders/history" class="btn btn-primary">Order History</a>
                    </div>
                </div>
                <a href="/profile/edit-profile" class="btn btn-primary mt-2">Edit Profile</a>
            </div>
        </div>

        <!-- Address Management -->
    <!------    <div class="card mb-4">
            <div class="card-header">Address Management</div>
            <div class="card-body">
                <% if (user.addresses && user.addresses.length > 0) { %>
                    <ul class="list-group">
                        <% user.addresses.forEach(function(address) { %>
                            <li class="list-group-item">
                                <p><strong>Address:</strong> <%= address.street %>, <%= address.city %>, <%= address.zipcode %></p>
                                <p><strong>Phone:</strong> <%= address.phone %></p>
                                <a href="/profile/address/edit/<%= address._id %>" class="btn btn-warning btn-sm">Edit</a>
                                <a href="/profile/address/delete/<%= address._id %>" class="btn btn-danger btn-sm">Delete</a>
                            </li>
                        <% }) %>
                    </ul>
                <% } else { %>
                    <p>No addresses found.</p>
                <% } %>
                <a href="/profile/address/add" class="btn btn-primary mt-2">Add New Address</a>
            </div>
        </div>----->




<!-- Address Management -->
<div class="card mb-4">
    <div class="card-header">Address Management</div>
    <div class="card-body">
        <% if (addresses && addresses.length > 0) { %>
            <ul class="list-group">
                <% addresses.forEach(function(address) { %>
                    <li class="list-group-item">
                        <p><strong>Type:</strong> <%= address.addressType %></p>
                        <p><strong>Name:</strong> <%= address.name %></p>
                        <p><strong>City:</strong> <%= address.city %></p>
                        <p><strong>Landmark:</strong> <%= address.landMark %></p>
                        <p><strong>State:</strong> <%= address.state %></p>
                        <p><strong>Pincode:</strong> <%= address.pincode %></p>
                        <p><strong>Phone:</strong> <%= address.phone %></p>
                        <p><strong>Alternate Phone:</strong> <%= address.altPhone %></p>
                        <a href="/profile/address/edit/<%= address._id %>" class="btn btn-warning btn-sm">Edit</a>
                     <!------   <a href="/profile/address/delete/<%= address._id %>" class="btn btn-danger btn-sm">Delete</a>---->
                    <form action="/profile/address/delete/<%= address._id %>" method="POST" style="display:inline;">
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </li>
                <% }) %>
            </ul>
        <% } else { %>
            <p>No addresses found.</p>
        <% } %>
        <a href="/profile/address/add" class="btn btn-primary mt-2">Add New Address</a>
    </div>
</div>






        <!-- Order History -->
        <div class="card mb-4">
            <div class="card-header">Order History</div>
            <div class="card-body">
                <% if (user.orderHistory && user.orderHistory.length > 0) { %>
                    <ul class="list-group">
                        <% user.orderHistory.forEach(function(order) { %>
                            <li class="list-group-item">
                                <p><strong>Order ID:</strong> <%= order._id %></p>
                                <p><strong>Status:</strong> <%= order.status %></p>
                             <!----- <p><strong>Total:</strong> $<%= order.total %></p>---->
                                <a href="/profile/order/cancel/<%= order._id %>" class="btn btn-danger btn-sm">Cancel Order</a>
                            </li>
                        <% }) %>
                    </ul>
                <% } else { %>
                    <p>No orders found.</p>
                <% } %>
            </div>
        </div>

        <!-- Forgot Password -->
        <div class="card mb-4">
            <div class="card-header">Password Management</div>
            <div class="card-body">
                <p>If you forgot your password, you can reset it by clicking below:</p>
                <a href="/forgot-password" class="btn btn-warning">Forgot Password</a>
            </div>
        </div>
    </div>

    <!-- Include Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    


    <%- include("../../views/partials/user/footer") %>
</body>


